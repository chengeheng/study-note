# 前端性能优化

> 西岭直播课

**主要优化的方面**

- 网络层优化
- 执行层上面的优化
- 其他的性能优化

## 重要性

- 对于产品的重要性：秒开率->影响留存率
- 对于应聘者：知识的全面考察

## 思路

1. 如何让网络通信更快速
2. 如何让数据处理更高效

### 更快的网络通信

1. CDN（内容分发网络）

   - 全局负载均衡
   - 缓存系统：命中率、回流率

2. 请求次数优化 - 浏览器并发请求次数有上限

   chrome 并发请求次数为 6 次，firefox 为 8 次

   - 资源合并（雪碧图、字体图标）
   - 域名分片（多域名）- 需要解决跨域问题

3. 数据传输层面-缓存

   - 强缓存
   - 协商缓存

4. 数据传输层面-压缩

   - 数据压缩
   - 代码文件压缩
   - 静态资源

     1. 根据屏幕分辨率、宽度响应加载合适大小的图片
     2. 用低保真、高锐化图片替换高质量图片

   - 头与报文

5. 通信协议层面-HTTP2

   HTTP2 头部压缩：

   1. 请求头压缩
   2. 专门的 HPACK 压缩算法

      建立一个索引表，分为静态表和动态表；霍夫曼编码

   HTTP2 二进制帧：

   1. 文本字符分割的数据流解析慢且容易出错
   2. 二进制帧：帧长度、类型、标识

   HTTP2 链路复用：此时不能使用资源合并和域名分片

### 前端代码层面

1. 客户端渲染（CSR）
2. 服务端渲染（SSR）=> Next.js、Nuxt.js
3. 静态站点生成方案（SSG）

## 性能分析工具 -- ab 测试工具

node 环境下：

```javascript
node --prof .\http.js
```

面试回答的角度角度：由大到小、循序渐进；分两类开始回答
